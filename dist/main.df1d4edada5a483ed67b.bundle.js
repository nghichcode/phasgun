/*! For license information please see main.df1d4edada5a483ed67b.bundle.js.LICENSE.txt */
(()=>{var e,t={254:(e,t,s)=>{"use strict";s.d(t,{R:()=>f,$:()=>m});var a=s(260),i=s.n(a);class n extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"#FFF",fontSize:"28px",fontFamily:"EvilEmpire"}),e.add.existing(this,!0).setScrollFactor(0,0),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}const r=(e,t,s)=>e.physics.add.staticSprite(t,s,"pad_1_3").setScale(.5).refreshBody().setDisplayOrigin(190,97).setSize(180,40),o=r,h=(e,t)=>{const s=[];for(let a=t.start;a<=t.end;a++)s.push({key:e,frame:`${t.prefix}${String(a).padStart(t.pad,"0")}${t.suffix}`});return s};class l extends i().Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"explosion-gas","Explosion_gas_circle1.png")}setMainScene(e){this.mainScene||(this.mainScene=e)}fire(e,t){this.anims.play("explosion-gas-default"),this.body.reset(e,t),this.setDepth(1),this.setActive(!0),this.setVisible(!0),this.setVelocityX(600),setTimeout((()=>{this.scene.cameras.main.worldView.contains(this.x,this.y)||this.anims.play("explosion-gas",!0)}),2200)}preUpdate(e,t){super.preUpdate(e,t),"explosion-gas"===this.anims.getName()&&1===this.anims.getProgress()&&(this.setActive(!1),this.setVisible(!1))}}class p extends i().Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({frameQuantity:5,key:"bullet",active:!1,visible:!1,classType:l})}fireBullet(e,t){let s=this.getFirstDead(!1);return s&&("explosion-gas"===s.anims.getName()?1===s.anims.getProgress()&&s.fire(e,t):s.fire(e,t)),s}}class c extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.landList=[],this.isJump=!1,this.isFire=!1,this.maxY=0}create(){const e=this;this.background=this.add.tileSprite(0,0,m,f,"game_background").setOrigin(0).setScrollFactor(0,0),this.fpsText=new n(this),this.cursors=this.input.keyboard.createCursorKeys(),this.platforms=this.physics.add.staticGroup(),this.soundHit=this.sound.add("hit"),this.soundShot=this.sound.add("shot"),this.soundWhoosh=this.sound.add("whoosh"),this.soundSpawn=this.sound.add("spawn");for(let e=0;e<8;e++)this.generateFromPrevLand();e.btnA=this.add.sprite(1100,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0),e.btnA.on("pointerdown",(function(t){e.isJump=!0,e.btnA.setAlpha(.8)})),e.btnA.on("pointerup",(function(t){e.isJump=!1,e.btnA.setAlpha(1)})),e.btnB=this.add.sprite(200,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0),s.g.btnA=this.btnA,e.btnB.on("pointerdown",(function(t){e.soundSpawn.play(),e.bullets.fireBullet(e.player.x+20,e.player.y),e.isFire=!0,e.btnB.setAlpha(.8)})),e.btnB.on("pointerup",(function(t){e.isFire=!1,e.btnB.setAlpha(1)})),this.player=this.physics.add.sprite(100,440,"wraith-pack","Wraith_01_Idle Blinking_001.png"),this.player.collideWorldBounds=!0,this.player.setSize(this.player.body.width-80,this.player.body.height).setScale(.4).refreshBody(),this.player.setDepth(1),this.player.setBounce(.2),this.physics.add.collider(this.player,this.platforms),this.cameras.main.startFollow(this.player,!1,1,1,-m/2+200,0),this.anims.create({key:"idle",frames:h("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Idle Blinking_",suffix:".png",pad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"walking",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Moving Forward_",suffix:".png",zeroPad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"attack",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Attack_",suffix:".png",zeroPad:3}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas",frames:this.anims.generateFrameNames("explosion-gas",{start:1,end:6,prefix:"Explosion_gas_circle",suffix:".png",zeroPad:0}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas-default",frames:[{key:"explosion-gas",frame:"Explosion_gas_circle1.png"}],frameRate:18,repeat:-1}),this.bullets=new p(this),this.physics.add.collider(this.bullets,this.platforms,((e,t)=>{var s;if(e){const t=e;t.active&&(null===(s=this.soundHit)||void 0===s||s.play()),t.anims.play("explosion-gas",!0),t.setVelocity(0,0)}})),this.input.keyboard.on("keydown-SPACE",(e=>{this.soundSpawn.play(),this.bullets.fireBullet(this.player.x+20,this.player.y)})),this.input.keyboard.on("keydown-P",(e=>{this.scene.isPaused()?this.scene.resume():this.scene.pause()}))}update(){const e=this.cursors,t=this.player;this.fpsText.update(),console.log(this.input.activePointer.isDown,this.isJump),e.right.isDown||this.input.activePointer.isDown&&this.isJump?(t.anims.play("walking",!0),t.setVelocityX(c.maxH)):e.space.isDown?t.anims.play("attack",!0):("attack"===t.anims.getName()&&1!==t.anims.getProgress()||t.anims.play("idle",!0),t.setVelocityX(0)),t.body.touching.down&&(this.soundWhoosh.play(),t.setVelocityY(-330));const s=this.landList.length>0?this.landList[0]:null;s&&s.x<t.x-300&&(s.destroy(),this.platforms.remove(s),this.landList.splice(0,1),this.generateFromPrevLand()),t.y>this.maxY+f&&this.scene.pause(),this.background.setTilePosition(this.cameras.main.scrollX)}generateFromPrevLand(){let e;if(this.landList.length<=0)e=o(this,c.DEFAULT_LAND_X,c.DEFAULT_LAND_Y);else{const a=this.landList[this.landList.length-1];this,t=a.x,s=a.y,e=r(this,Phaser.Math.Between(t+190+10,t+300),Phaser.Math.Between(s-100,s))}var t,s;this.landList.push(e),this.platforms.add(e),e.y>this.maxY&&(this.maxY=e.y)}}c.DEFAULT_LAND_X=120,c.DEFAULT_LAND_Y=580,c.maxH=180;class d extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.audio("hit","assets/sound/Hit.wav"),this.load.audio("shot","assets/sound/Shot.wav"),this.load.audio("whoosh","assets/sound/Whoosh.wav"),this.load.audio("spawn","assets/sound/Spawn.wav"),this.load.image("phaser-logo","assets/img/phaser-logo.png"),this.load.image("game_background","assets/img/game_background.png"),this.load.image("button-primary","assets/img/button-primary.png"),this.load.image("pad_1_3","assets/img/pads/Pad_1_3.png"),this.load.atlas("wraith-pack","assets/img/wraith-pack/wraith.png","assets/img/wraith-pack/wraith.json"),this.load.atlas("explosion-gas","assets/img/explosion/explosion-gas.png","assets/img/explosion/explosion-gas.json")}create(){this.scene.start("PreviewScene")}}class u extends Phaser.GameObjects.Text{constructor(e,t,s,a){super(e,t,s,a,{stroke:"#0D089B",strokeThickness:6,color:"#FFFFFFC9",fontSize:"58px",fontFamily:"EvilEmpire"});const i=this.context.createLinearGradient(0,0,0,this.height);i.addColorStop(0,"#FFFFFF"),i.addColorStop(1,"#FFFFFFAA"),this.setFill(i),e.add.existing(this)}update(){}}class g extends Phaser.Scene{constructor(){super({key:"PreviewScene"}),this.enableSound=!1}create(){const e=this;this.add.tileSprite(0,0,m,f,"game_background").setOrigin(0).setScrollFactor(0,0);const t=this.physics.add.staticSprite(m/2,200,"button-primary").setSize(298,120).setScale(.8).setInteractive(),s=new u(this,m/2-40,170,"PLAY");t.on("pointerdown",(function(e){t.setAlpha(.8),s.setAlpha(.8)})),t.on("pointerup",(function(a){t.setAlpha(1),s.setAlpha(1),e.scene.start("MainScene")}));const a=this.add.sprite(m/2,380,"button-primary").setScale(.8).setInteractive(),i=new u(this,m/2-120,350,"SOUND: "+(e.enableSound?" ON":"OFF"));a.on("pointerdown",(function(e){a.setAlpha(.8),i.setAlpha(.8)})),a.on("pointerup",(function(t){e.enableSound=!e.enableSound,i.setText("SOUND: "+(e.enableSound?"ON":"OFF")),a.setAlpha(1),i.setAlpha(1)}));const n=this.add.sprite(m/2,560,"button-primary").setScale(.8).setInteractive(),r=new u(this,m/2-50,530,"ABOUT");n.on("pointerdown",(function(e){n.setAlpha(.8),r.setAlpha(.8)})),n.on("pointerup",(function(e){n.setAlpha(1),r.setAlpha(1)}))}defaultPointerDown(e,t){e.setAlpha(.8),t.setAlpha(.8)}update(){}}const m=1280,f=720,y={type:Phaser.AUTO,backgroundColor:"#FFF",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:m,height:f},scene:[d,g,c],physics:{default:"arcade",arcade:{debug:!0,gravity:{y:400}}}};window.addEventListener("load",(()=>{const e=new Phaser.Game(y);window.addEventListener("keydown",(t=>{"p"===t.key&&e.scene.getScenes(!1).forEach((e=>{e.scene.isPaused()&&e.scene.resume(),console.log(e.scene.key,e.scene.isPaused())}))}))}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,s,i,n)=>{if(!s){var r=1/0;for(p=0;p<e.length;p++){for(var[s,i,n]=e[p],o=!0,h=0;h<s.length;h++)(!1&n||r>=n)&&Object.keys(a.O).every((e=>a.O[e](s[h])))?s.splice(h--,1):(o=!1,n<r&&(r=n));if(o){e.splice(p--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[s,i,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,n,[r,o,h]=s,l=0;if(r.some((t=>0!==e[t]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(h)var p=h(a)}for(t&&t(s);l<r.length;l++)n=r[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(p)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),a.O(void 0,[216],(()=>a(254)));var i=a.O(void 0,[216],(()=>a(204)));i=a.O(i)})();