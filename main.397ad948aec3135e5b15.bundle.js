/*! For license information please see main.397ad948aec3135e5b15.bundle.js.LICENSE.txt */
(()=>{var t,e={975:(t,e,s)=>{"use strict";s.d(e,{R:()=>k,$:()=>F});var i=s(260),a=s.n(i);class n extends Phaser.GameObjects.Text{constructor(t){super(t,10,10,"",{color:"#FFF",fontSize:"28px",fontFamily:"EvilEmpire"}),t.add.existing(this,!0).setScrollFactor(0,0),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}const o=(t,e,s)=>t.physics.add.staticSprite(e,s,"pad_1_3").setScale(.5).refreshBody().setDisplayOrigin(190,97).setSize(180,40),r=o,c=(t,e)=>{const s=[];for(let i=e.start;i<=e.end;i++)s.push({key:t,frame:`${e.prefix}${String(i).padStart(e.pad,"0")}${e.suffix}`});return s};class l extends a().Physics.Arcade.Sprite{constructor(t,e,s){super(t,e,s,"explosion-gas","Explosion_gas_circle1.png")}setMainScene(t){this.mainScene||(this.mainScene=t)}fire(t,e){this.anims.play("explosion-gas-default"),this.body.reset(t,e),this.setDepth(1),this.setActive(!0),this.setVisible(!0),this.setVelocityX(600),setTimeout((()=>{this.scene.cameras.main.worldView.contains(this.x,this.y)||this.anims.play("explosion-gas",!0)}),2200)}preUpdate(t,e){super.preUpdate(t,e),"explosion-gas"===this.anims.getName()&&1===this.anims.getProgress()&&(this.setActive(!1),this.setVisible(!1))}}class h extends a().Physics.Arcade.Group{constructor(t){super(t.physics.world,t),this.createMultiple({frameQuantity:5,key:"bullet",active:!1,visible:!1,classType:l})}fireBullet(t,e){let s=this.getFirstDead(!1);return s&&("explosion-gas"===s.anims.getName()?1===s.anims.getProgress()&&s.fire(t,e):s.fire(t,e)),s}}class p extends Phaser.GameObjects.Text{constructor(t,e,s,i){super(t,e,s,i,{stroke:"#0D089B",strokeThickness:6,color:"#FFFFFFC9",fontSize:"58px",fontFamily:"EvilEmpire"});const a=this.context.createLinearGradient(0,0,0,this.height);a.addColorStop(0,"#FFFFFF"),a.addColorStop(1,"#FFFFFFAA"),this.setFill(a),t.add.existing(this)}update(){}}class d extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.landList=[],this.isJump=!1,this.isFire=!1,this.maxY=0}create(){const t=this;this.background=this.add.tileSprite(0,0,F,k,"game_background").setOrigin(0).setScrollFactor(0,0),this.fpsText=new n(this),this.cursors=this.input.keyboard.createCursorKeys(),this.input.addPointer(1),this.platforms=this.physics.add.staticGroup(),this.soundHit=this.sound.add("hit"),this.soundShot=this.sound.add("shot"),this.soundWhoosh=this.sound.add("whoosh"),this.soundSpawn=this.sound.add("spawn"),t.btnA=this.add.sprite(1100,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0).setDepth(1);const e=new p(this,168,590,"Fire");e.setScrollFactor(0,0).setDepth(2).setFontSize(50),t.btnA.on("pointerdown",(function(s){t.isJump=!0,e.setAlpha(.8),t.btnA.setAlpha(.8)})),t.btnA.on("pointerup",(function(s){t.isJump=!1,e.setAlpha(1),t.btnA.setAlpha(1)})),t.btnB=this.add.sprite(200,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0).setDepth(1);const s=new p(this,1058,590,"Jump");s.setScrollFactor(0,0).setDepth(2).setFontSize(50),t.btnB.on("pointerdown",(function(e){s.setAlpha(.8),t.soundSpawn.play(),t.bullets.fireBullet(t.player.x+20,t.player.y),t.isFire=!0,t.btnB.setAlpha(.8)})),t.btnB.on("pointerup",(function(e){s.setAlpha(1),t.isFire=!1,t.btnB.setAlpha(1)})),this.player=this.physics.add.sprite(100,440,"wraith-pack","Wraith_01_Idle Blinking_001.png"),this.player.collideWorldBounds=!0,this.player.setSize(this.player.body.width-80,this.player.body.height).setScale(.4).refreshBody(),this.player.setDepth(1),this.player.setBounce(.2),this.physics.add.collider(this.player,this.platforms),this.cameras.main.startFollow(this.player,!1,1,1,-F/2+200,0),this.anims.create({key:"idle",frames:c("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Idle Blinking_",suffix:".png",pad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"walking",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Moving Forward_",suffix:".png",zeroPad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"attack",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Attack_",suffix:".png",zeroPad:3}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas",frames:this.anims.generateFrameNames("explosion-gas",{start:1,end:6,prefix:"Explosion_gas_circle",suffix:".png",zeroPad:0}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas-default",frames:[{key:"explosion-gas",frame:"Explosion_gas_circle1.png"}],frameRate:18,repeat:-1}),this.bullets=new h(this),this.physics.add.collider(this.bullets,this.platforms,((t,e)=>{var s;if(t){const e=t;e.active&&(null===(s=this.soundHit)||void 0===s||s.play()),e.anims.play("explosion-gas",!0),e.setVelocity(0,0)}})),this.input.keyboard.on("keydown-SPACE",(t=>{this.soundSpawn.play(),this.bullets.fireBullet(this.player.x+20,this.player.y)})),this.input.keyboard.on("keydown-P",(t=>{this.scene.isPaused()?this.scene.resume():this.scene.pause()})),this.reloadScene()}reloadScene(){this.landList.forEach((t=>t.destroy())),this.landList=[];for(let t=0;t<8;t++)this.generateFromPrevLand()}update(){const t=this.cursors,e=this.player;this.fpsText.update(),t.right.isDown||this.input.activePointer.isDown&&this.isJump?(e.anims.play("walking",!0),e.setVelocityX(d.maxH)):t.space.isDown?e.anims.play("attack",!0):("attack"===e.anims.getName()&&1!==e.anims.getProgress()||e.anims.play("idle",!0),e.setVelocityX(0)),e.body.touching.down&&(this.soundWhoosh.play(),e.setVelocityY(-330));const s=this.landList.length>0?this.landList[0]:null;s&&s.x<e.x-300&&(s.destroy(),this.platforms.remove(s),this.landList.splice(0,1),this.generateFromPrevLand()),e.y>this.maxY+k&&(this.scene.pause(),this.scene.setActive(!1),this.scene.start("PreviewScene")),this.background.setTilePosition(this.cameras.main.scrollX)}generateFromPrevLand(){let t;if(this.landList.length<=0)t=r(this,d.DEFAULT_LAND_X,d.DEFAULT_LAND_Y);else{const i=this.landList[this.landList.length-1];this,e=i.x,s=i.y,t=o(this,Phaser.Math.Between(e+190+10,e+300),Phaser.Math.Between(s-100,s))}var e,s;this.landList.push(t),this.platforms.add(t),t.y>this.maxY&&(this.maxY=t.y)}}d.DEFAULT_LAND_X=120,d.DEFAULT_LAND_Y=580,d.maxH=180;class u extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){const t=this.cameras.main.width,e=this.cameras.main.height,s={color:"#000000",fontSize:"28px",fontFamily:"monospace"},i=this.make.text({x:t/2,y:e/2-50,text:"Loading...",style:s});i.setOrigin(.5,.5);const a=this.make.text({x:t/2,y:e/2-5,text:"0%",style:s});a.setOrigin(.5,.5),this.load.on("progress",(function(t){a.setText(Math.ceil(100*Number(t))+"%")})),this.load.on("fileprogress",(function(t){})),this.load.on("complete",(function(){i.destroy(),a.destroy()})),this.load.audio("hit","assets/sound/Hit.wav"),this.load.audio("shot","assets/sound/Shot.wav"),this.load.audio("whoosh","assets/sound/Whoosh.wav"),this.load.audio("spawn","assets/sound/Spawn.wav"),this.load.image("phaser-logo","assets/img/phaser-logo.png"),this.load.image("game_background","assets/img/game_background.png"),this.load.image("button-primary","assets/img/button-primary.png"),this.load.image("pad_1_3","assets/img/pads/Pad_1_3.png"),this.load.atlas("wraith-pack","assets/img/wraith-pack/wraith.png","assets/img/wraith-pack/wraith.json"),this.load.atlas("explosion-gas","assets/img/explosion/explosion-gas.png","assets/img/explosion/explosion-gas.json")}create(){this.scene.start("PreviewScene")}}var f=s(90);const m=f.V5.model("AppModel").props({score:f.V5.optional(f.V5.number,0),sound:f.V5.optional(f.V5.boolean,!0)}).extend((t=>({views:{get environment(){return(0,f.dU)(t)}}}))).actions((t=>({setScore:e=>{t.score=e},setSound:e=>{t.sound=e}}))).views((t=>({}))),g=f.V5.model("RootStore").props({app:f.V5.optional(m,{})});class y{constructor(){}setup(){return t=this,e=void 0,i=function*(){},new((s=void 0)||(s=Promise))((function(a,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function r(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((i=i.apply(t,e||[])).next())}));var t,e,s,i}}var v=function(t,e,s,i){return new(s||(s=Promise))((function(a,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function r(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((i=i.apply(t,e||[])).next())}))},w=function(t,e,s,i){return new(s||(s=Promise))((function(a,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function r(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((i=i.apply(t,e||[])).next())}))};let x=null;var b=s(949);class S extends Phaser.Scene{constructor(){super({key:"PreviewScene"})}create(){var t;const e=x,s=this;this.add.tileSprite(0,0,F,k,"game_background").setOrigin(0).setScrollFactor(0,0);const i=this.physics.add.staticSprite(F/2,200,"button-primary").setSize(298,120).setScale(.8).setInteractive(),a=new p(this,F/2-40,170,"PLAY");i.on("pointerdown",(function(t){i.setAlpha(.8),a.setAlpha(.8)})),i.on("pointerup",(function(t){i.setAlpha(1),a.setAlpha(1),s.scene.setActive(!1),s.scene.get("MainScene").scene.restart()}));const n=this.add.sprite(F/2,380,"button-primary").setScale(.8).setInteractive(),o=new p(this,F/2-120,350,"SOUND: "+((null===(t=null==e?void 0:e.app)||void 0===t?void 0:t.sound)?"ON":"OFF"));n.on("pointerdown",(function(t){n.setAlpha(.8),o.setAlpha(.8)})),n.on("pointerup",(function(t){var s,i;null===(s=null==e?void 0:e.app)||void 0===s||s.setSound(!(null===(i=null==e?void 0:e.app)||void 0===i?void 0:i.sound)),n.setAlpha(1),o.setAlpha(1)}));const r=this.add.sprite(F/2,560,"button-primary").setScale(.8).setInteractive(),c=new p(this,F/2-50,530,"ABOUT");r.on("pointerdown",(function(t){r.setAlpha(.8),c.setAlpha(.8)})),r.on("pointerup",(function(t){r.setAlpha(1),c.setAlpha(1)})),(0,b.EH)((()=>{var t;o.setText("SOUND: "+((null===(t=null==e?void 0:e.app)||void 0===t?void 0:t.sound)?"ON":"OFF"))}))}defaultPointerDown(t,e){t.setAlpha(.8),e.setAlpha(.8)}update(){}}const F=1280,k=720,A={type:Phaser.AUTO,backgroundColor:"#FFF",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:F,height:k},scene:[u,S,d],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("load",(()=>{const t=new Phaser.Game(A);(function(){w(this,void 0,void 0,(function*(){let t,e;const s=yield function(){return w(this,void 0,void 0,(function*(){const t=new y;return yield t.setup(),t}))}();try{e=(yield function(t){return v(this,void 0,void 0,(function*(){try{const t=yield localStorage.getItem("root");return JSON.parse(t||"{}")}catch(t){return null}}))}())||{},t=g.create(e,s)}catch(e){t=g.create({},s)}return(0,f.cf)(t,(t=>function(t,e){return v(this,void 0,void 0,(function*(){try{return yield localStorage.setItem("root",JSON.stringify(e)),!0}catch(t){return!1}}))}(0,t))),x=t,t}))})(),window.addEventListener("keydown",(e=>{"p"===e.key&&t.scene.getScenes(!1).forEach((t=>{t.scene.isPaused()&&t.scene.resume(),console.log(t.scene.key,t.scene.isPaused())}))}))}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,i),n.exports}i.m=e,t=[],i.O=(e,s,a,n)=>{if(!s){var o=1/0;for(h=0;h<t.length;h++){for(var[s,a,n]=t[h],r=!0,c=0;c<s.length;c++)(!1&n||o>=n)&&Object.keys(i.O).every((t=>i.O[t](s[c])))?s.splice(c--,1):(r=!1,n<o&&(o=n));if(r){t.splice(h--,1);var l=a();void 0!==l&&(e=l)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[s,a,n]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,n,[o,r,c]=s,l=0;if(o.some((e=>0!==t[e]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(c)var h=c(i)}for(e&&e(s);l<o.length;l++)n=o[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(h)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(975)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();