/*! For license information please see main.cb9a8e25df33b1eca597.bundle.js.LICENSE.txt */
(()=>{var t,e={975:(t,e,s)=>{"use strict";s.d(e,{R:()=>A,$:()=>k});var i=s(260),n=s.n(i);class a extends Phaser.GameObjects.Text{constructor(t){super(t,10,10,"",{color:"#FFF",fontSize:"28px",fontFamily:"EvilEmpire"}),t.add.existing(this,!0).setScrollFactor(0,0),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}const o=(t,e,s)=>t.physics.add.staticSprite(e,s,"pad_1_3").setScale(.5).refreshBody().setDisplayOrigin(190,97).setSize(180,40),r=o,l=(t,e)=>{const s=[];for(let i=e.start;i<=e.end;i++)s.push({key:t,frame:`${e.prefix}${String(i).padStart(e.pad,"0")}${e.suffix}`});return s};class c extends n().Physics.Arcade.Sprite{constructor(t,e,s){super(t,e,s,"explosion-gas","Explosion_gas_circle1.png")}setMainScene(t){this.mainScene||(this.mainScene=t)}fire(t,e){this.anims.play("explosion-gas-default"),this.body.reset(t,e),this.setDepth(1),this.setActive(!0),this.setVisible(!0),this.setVelocityX(600),setTimeout((()=>{this.scene.cameras.main.worldView.contains(this.x,this.y)||this.anims.play("explosion-gas",!0)}),2200)}preUpdate(t,e){super.preUpdate(t,e),"explosion-gas"===this.anims.getName()&&1===this.anims.getProgress()&&(this.setActive(!1),this.setVisible(!1))}}class h extends n().Physics.Arcade.Group{constructor(t){super(t.physics.world,t),this.createMultiple({frameQuantity:5,key:"bullet",active:!1,visible:!1,classType:c})}fireBullet(t,e){let s=this.getFirstDead(!1);return s&&("explosion-gas"===s.anims.getName()?1===s.anims.getProgress()&&s.fire(t,e):s.fire(t,e)),s}}class p extends Phaser.GameObjects.Text{constructor(t,e,s,i){super(t,e,s,i,{stroke:"#0D089B",strokeThickness:6,color:"#FFFFFFC9",fontSize:"58px",fontFamily:"EvilEmpire"});const n=this.context.createLinearGradient(0,0,0,this.height);n.addColorStop(0,"#FFFFFF"),n.addColorStop(1,"#FFFFFFAA"),this.setFill(n),t.add.existing(this)}update(){}}var d=s(90);const u=d.V5.model("AppModel").props({score:d.V5.optional(d.V5.number,0),sound:d.V5.optional(d.V5.boolean,!0)}).extend((t=>({views:{get environment(){return(0,d.dU)(t)}}}))).actions((t=>({setScore:e=>{t.score=e},setSound:e=>{t.sound=e}}))).views((t=>({}))),f=d.V5.model("RootStore").props({app:d.V5.optional(u,{})});class m{constructor(){}setup(){return t=this,e=void 0,i=function*(){},new((s=void 0)||(s=Promise))((function(n,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function r(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}l((i=i.apply(t,e||[])).next())}));var t,e,s,i}}var g=function(t,e,s,i){return new(s||(s=Promise))((function(n,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function r(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}l((i=i.apply(t,e||[])).next())}))},y=function(t,e,s,i){return new(s||(s=Promise))((function(n,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function r(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}l((i=i.apply(t,e||[])).next())}))};let v=null;function w(){return v}class x extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.landList=[],this.isJump=!1,this.isFire=!1,this.maxY=0}create(){const t=this;this.store=w(),this.background=this.add.tileSprite(0,0,k,A,"game_background").setOrigin(0).setScrollFactor(0,0),this.fpsText=new a(this),this.cursors=this.input.keyboard.createCursorKeys(),this.input.addPointer(1),this.platforms=this.physics.add.staticGroup(),this.soundHit=this.sound.add("hit"),this.soundShot=this.sound.add("shot"),this.soundWhoosh=this.sound.add("whoosh"),this.soundSpawn=this.sound.add("spawn"),t.btnFire=this.add.sprite(1100,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0).setDepth(1);const e=new p(this,1058,590,"Fire");e.setScrollFactor(0,0).setDepth(2).setFontSize(50),t.btnFire.on("pointerdown",(function(s){var i,n;e.setAlpha(.8),(null===(n=null===(i=null==t?void 0:t.store)||void 0===i?void 0:i.app)||void 0===n?void 0:n.sound)&&t.soundSpawn.play(),t.bullets.fireBullet(t.player.x+20,t.player.y),t.isFire=!0,t.btnFire.setAlpha(.8)})),t.btnFire.on("pointerup",(function(s){e.setAlpha(1),t.isFire=!1,t.btnFire.setAlpha(1)})),t.btnJump=this.add.sprite(200,620,"button-primary").setScale(.5).setInteractive().setScrollFactor(0,0).setDepth(1);const s=new p(this,158,590,"Jump");s.setScrollFactor(0,0).setDepth(2).setFontSize(50),t.btnJump.on("pointerdown",(function(e){t.isJump=!0,s.setAlpha(.8),t.btnJump.setAlpha(.8)})),t.btnJump.on("pointerup",(function(e){t.isJump=!1,s.setAlpha(1),t.btnJump.setAlpha(1)})),t.btnExit=this.add.rectangle(1100,60,398,176).setScale(.5).setInteractive().setScrollFactor(0,0).setDepth(1);const i=new p(this,1058,30,"Exit");i.setScrollFactor(0,0).setDepth(2).setFontSize(50),t.btnExit.on("pointerdown",(function(t){i.setAlpha(.8)})),t.btnExit.on("pointerup",(function(e){i.setAlpha(1),t.scene.pause(),t.scene.setActive(!1),t.scene.start("PreviewScene")})),this.player=this.physics.add.sprite(100,440,"wraith-pack","Wraith_01_Idle Blinking_001.png"),this.player.collideWorldBounds=!0,this.player.setSize(this.player.body.width-80,this.player.body.height).setScale(.4).refreshBody(),this.player.setDepth(1),this.player.setBounce(.2),this.physics.add.collider(this.player,this.platforms),this.cameras.main.startFollow(this.player,!1,1,1,-k/2+200,0),this.anims.create({key:"idle",frames:l("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Idle Blinking_",suffix:".png",pad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"walking",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Moving Forward_",suffix:".png",zeroPad:3}),frameRate:8,repeat:-1}),this.anims.create({key:"attack",frames:this.anims.generateFrameNames("wraith-pack",{start:0,end:11,prefix:"Wraith_01_Attack_",suffix:".png",zeroPad:3}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas",frames:this.anims.generateFrameNames("explosion-gas",{start:1,end:6,prefix:"Explosion_gas_circle",suffix:".png",zeroPad:0}),frameRate:18,repeat:-1}),this.anims.create({key:"explosion-gas-default",frames:[{key:"explosion-gas",frame:"Explosion_gas_circle1.png"}],frameRate:18,repeat:-1}),this.bullets=new h(this),this.physics.add.collider(this.bullets,this.platforms,((e,s)=>{var i,n,a;if(e){const s=e;s.active&&(null===(n=null===(i=null==t?void 0:t.store)||void 0===i?void 0:i.app)||void 0===n?void 0:n.sound)&&(null===(a=this.soundHit)||void 0===a||a.play()),s.anims.play("explosion-gas",!0),s.setVelocity(0,0)}})),this.input.keyboard.on("keydown-SPACE",(e=>{var s,i;(null===(i=null===(s=null==t?void 0:t.store)||void 0===s?void 0:s.app)||void 0===i?void 0:i.sound)&&this.soundSpawn.play(),this.bullets.fireBullet(this.player.x+20,this.player.y)})),this.input.keyboard.on("keydown-P",(t=>{this.scene.isPaused()?this.scene.resume():this.scene.pause()})),this.reloadScene()}reloadScene(){this.landList.forEach((t=>t.destroy())),this.landList=[];for(let t=0;t<8;t++)this.generateFromPrevLand()}update(){var t,e;const s=this.cursors,i=this.player;this.fpsText.update(),s.right.isDown||this.input.activePointer.isDown&&this.isJump?(i.anims.play("walking",!0),i.setVelocityX(x.maxH)):s.space.isDown?i.anims.play("attack",!0):("attack"===i.anims.getName()&&1!==i.anims.getProgress()||i.anims.play("idle",!0),i.setVelocityX(0)),i.body.touching.down&&((null===(e=null===(t=null==this?void 0:this.store)||void 0===t?void 0:t.app)||void 0===e?void 0:e.sound)&&this.soundWhoosh.play(),i.setVelocityY(-330));const n=this.landList.length>0?this.landList[0]:null;n&&n.x<i.x-300&&(n.destroy(),this.platforms.remove(n),this.landList.splice(0,1),this.generateFromPrevLand()),i.y>this.maxY+A&&(this.scene.pause(),this.scene.setActive(!1),this.scene.start("PreviewScene")),this.background.setTilePosition(this.cameras.main.scrollX)}generateFromPrevLand(){let t;if(this.landList.length<=0)t=r(this,x.DEFAULT_LAND_X,x.DEFAULT_LAND_Y);else{const i=this.landList[this.landList.length-1];this,e=i.x,s=i.y,t=o(this,Phaser.Math.Between(e+190+10,e+300),Phaser.Math.Between(s-100,s))}var e,s;this.landList.push(t),this.platforms.add(t),t.y>this.maxY&&(this.maxY=t.y)}}x.DEFAULT_LAND_X=120,x.DEFAULT_LAND_Y=580,x.maxH=180;class S extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){const t=this.cameras.main.width,e=this.cameras.main.height,s={color:"#000000",fontSize:"28px",fontFamily:"monospace"},i=this.make.text({x:t/2,y:e/2-50,text:"Loading...",style:s});i.setOrigin(.5,.5);const n=this.make.text({x:t/2,y:e/2-5,text:"0%",style:s});n.setOrigin(.5,.5),this.load.on("progress",(function(t){n.setText(Math.ceil(100*Number(t))+"%")})),this.load.on("fileprogress",(function(t){})),this.load.on("complete",(function(){i.destroy(),n.destroy()})),this.load.audio("hit","assets/sound/Hit.wav"),this.load.audio("shot","assets/sound/Shot.wav"),this.load.audio("whoosh","assets/sound/Whoosh.wav"),this.load.audio("spawn","assets/sound/Spawn.wav"),this.load.image("phaser-logo","assets/img/phaser-logo.png"),this.load.image("game_background","assets/img/game_background.png"),this.load.image("button-primary","assets/img/button-primary.png"),this.load.image("pad_1_3","assets/img/pads/Pad_1_3.png"),this.load.atlas("wraith-pack","assets/img/wraith-pack/wraith.png","assets/img/wraith-pack/wraith.json"),this.load.atlas("explosion-gas","assets/img/explosion/explosion-gas.png","assets/img/explosion/explosion-gas.json")}create(){this.scene.start("PreviewScene")}}var F=s(949);class b extends Phaser.Scene{constructor(){super({key:"PreviewScene"})}create(){var t;const e=w(),s=this;this.add.tileSprite(0,0,k,A,"game_background").setOrigin(0).setScrollFactor(0,0);const i=this.physics.add.staticSprite(k/2,200,"button-primary").setSize(298,120).setScale(.8).setInteractive(),n=new p(this,k/2-40,170,"PLAY");i.on("pointerdown",(function(t){i.setAlpha(.8),n.setAlpha(.8)})),i.on("pointerup",(function(t){i.setAlpha(1),n.setAlpha(1),s.scene.setActive(!1),s.scene.get("MainScene").scene.restart()}));const a=this.add.sprite(k/2,380,"button-primary").setScale(.8).setInteractive(),o=new p(this,k/2-120,350,"SOUND: "+((null===(t=null==e?void 0:e.app)||void 0===t?void 0:t.sound)?"ON":"OFF"));a.on("pointerdown",(function(t){a.setAlpha(.8),o.setAlpha(.8)})),a.on("pointerup",(function(t){var s,i;null===(s=null==e?void 0:e.app)||void 0===s||s.setSound(!(null===(i=null==e?void 0:e.app)||void 0===i?void 0:i.sound)),a.setAlpha(1),o.setAlpha(1)}));const r=this.add.sprite(k/2,560,"button-primary").setScale(.8).setInteractive(),l=new p(this,k/2-50,530,"ABOUT");r.on("pointerdown",(function(t){r.setAlpha(.8),l.setAlpha(.8)})),r.on("pointerup",(function(t){r.setAlpha(1),l.setAlpha(1)})),(0,F.EH)((()=>{var t;o.setText("SOUND: "+((null===(t=null==e?void 0:e.app)||void 0===t?void 0:t.sound)?"ON":"OFF"))}))}defaultPointerDown(t,e){t.setAlpha(.8),e.setAlpha(.8)}update(){}}const k=1280,A=720,P={type:Phaser.AUTO,backgroundColor:"#FFF",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:k,height:A},scene:[S,b,x],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("load",(()=>{const t=new Phaser.Game(P);(function(){y(this,void 0,void 0,(function*(){let t,e;const s=yield function(){return y(this,void 0,void 0,(function*(){const t=new m;return yield t.setup(),t}))}();try{e=(yield function(t){return g(this,void 0,void 0,(function*(){try{const t=yield localStorage.getItem("root");return JSON.parse(t||"{}")}catch(t){return null}}))}())||{},t=f.create(e,s)}catch(e){t=f.create({},s)}return(0,d.cf)(t,(t=>function(t,e){return g(this,void 0,void 0,(function*(){try{return yield localStorage.setItem("root",JSON.stringify(e)),!0}catch(t){return!1}}))}(0,t))),v=t,t}))})(),window.addEventListener("keydown",(e=>{"p"===e.key&&t.scene.getScenes(!1).forEach((t=>{t.scene.isPaused()&&t.scene.resume(),console.log(t.scene.key,t.scene.isPaused())}))}))}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var a=s[t]={exports:{}};return e[t].call(a.exports,a,a.exports,i),a.exports}i.m=e,t=[],i.O=(e,s,n,a)=>{if(!s){var o=1/0;for(h=0;h<t.length;h++){for(var[s,n,a]=t[h],r=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((t=>i.O[t](s[l])))?s.splice(l--,1):(r=!1,a<o&&(o=a));if(r){t.splice(h--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var h=t.length;h>0&&t[h-1][2]>a;h--)t[h]=t[h-1];t[h]=[s,n,a]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,a,[o,r,l]=s,c=0;if(o.some((e=>0!==t[e]))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var h=l(i)}for(e&&e(s);c<o.length;c++)a=o[c],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(h)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(975)));var n=i.O(void 0,[216],(()=>i(204)));n=i.O(n)})();